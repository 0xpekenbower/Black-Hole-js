# [SERVICE]
#     flush        5
#     daemon       off
#     http_server  off
#     log_level    info
#     storage.path /var/log/flb-storage/
#     workers      8

# [INPUT]
#     Name        forward
#     Listen      0.0.0.0
#     Port        24224

# [FILTER]
#     Name        record_modifier
#     Match       *
#     Record      hostname ${HOSTNAME}
#     Record      environment production

# # Write logs to Docker-managed volume (/fluent-logs)
# [OUTPUT]
#     Name  file
#     Match setup.*
#     Path  /fluent-logs
#     File  setup.log

# [OUTPUT]
#     Name  file
#     Match nginx.*
#     Path  /fluent-logs
#     File  nginx.log

# [OUTPUT]
#     Name  file
#     Match redis.*
#     Path  /fluent-logs
#     File  redis.log

# [OUTPUT]
#     Name  file
#     Match postgres_db.*
#     Path  /fluent-logs
#     File  postgres_db.log

# [OUTPUT]
#     Name  file
#     Match pgadmin.*
#     Path  /fluent-logs
#     File  pgadmin.log

# [OUTPUT]
#     Name  file
#     Match kafka.*
#     Path  /fluent-logs
#     File  kafka.log

# [OUTPUT]
#     Name  file
#     Match gateway.*
#     Path  /fluent-logs
#     File  gateway.log

# [OUTPUT]
#     Name  file
#     Match auth.*
#     Path  /fluent-logs
#     File  auth.log

# [OUTPUT]
#     Name  file
#     Match chat.*
#     Path  /fluent-logs
#     File  chat.log

# [OUTPUT]
#     Name  file
#     Match dash.*
#     Path  /fluent-logs
#     File  dash.log

# [OUTPUT]
#     Name  file
#     Match game.*
#     Path  /fluent-logs
#     File  game.log

# [OUTPUT]
#     Name  file
#     Match frontend.*
#     Path  /fluent-logs
#     File  frontend.log
[SERVICE]
    flush        5
    daemon       off
    log_level    info
    storage.path /var/log/flb-storage/
    workers      4

[INPUT]
    Name        forward
    Listen      0.0.0.0
    Port        24224

# Add hostname and environment tags to all logs
[FILTER]
    Name        record_modifier
    Match       *
    Record      hostname ${HOSTNAME}
    Record      environment production

[FILTER]
    Name        record_modifier
    Match       setup.*
    Record      service setup

[FILTER]
    Name        record_modifier
    Match       nginx.*
    Record      service nginx

[FILTER]
    Name        record_modifier
    Match       redis.*
    Record      service redis

[FILTER]
    Name        record_modifier
    Match       postgres_db.*
    Record      service postgres_db

[FILTER]
    Name        record_modifier
    Match       pgadmin.*
    Record      service pgadmin

[FILTER]
    Name        record_modifier
    Match       kafka.*
    Record      service kafka

[FILTER]
    Name        record_modifier
    Match       gateway.*
    Record      service gateway

[FILTER]
    Name        record_modifier
    Match       auth.*
    Record      service auth

[FILTER]
    Name        record_modifier
    Match       chat.*
    Record      service chat

[FILTER]
    Name        record_modifier
    Match       dash.*
    Record      service dash

[FILTER]
    Name        record_modifier
    Match       game.*
    Record      service game

[FILTER]
    Name        record_modifier
    Match       frontend.*
    Record      service frontend

[OUTPUT]
    Name   tcp
    Match  *
    Host   logstash
    Port   5000
    Format json_lines
